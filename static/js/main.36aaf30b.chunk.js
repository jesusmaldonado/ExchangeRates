(this.webpackJsonprevolut=this.webpackJsonprevolut||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),u=n.n(c),o=(n(14),n(15),n(1)),l={USD:"us",EUR:"eu",GBP:"gb"},s={USD:"$",EUR:"\u20ac",GBP:"\xa3"};function i(e){var t=e.currency,n=e.amount;return r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center"},r.a.createElement("span",{className:"flag-icon flag-icon-".concat(l[t])})),r.a.createElement("td",{className:"text-center"},r.a.createElement("span",null,"".concat(s[t]).concat(n))))}function m(e){var t=e.pockets;return r.a.createElement("table",{className:"table table-sm pockets mx-auto mt-6"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center",scope:"col"},"Currency"),r.a.createElement("th",{className:"text-center",scope:"col"},"Current Amount"))),r.a.createElement("tbody",null,t.map((function(e){var t=e.type,n=e.amount;return r.a.createElement(i,{key:t,currency:t,amount:n})}))))}var p=n(4),f=n.n(p),d=n(2),E=n(3),v=n(8);function y(e){var t=e.currentExchangeRate,n=t.split(":"),a=Object(o.a)(n,2),c=a[0],u=a[1],s=c.split("-"),i=Object(o.a)(s,2),m=i[0],p=i[1];return r.a.createElement("div",{className:"d-flex flex-column"},""!==t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("span",null,m),r.a.createElement("span",{className:"flag-icon flag-icon-".concat(l[m])}),r.a.createElement("span",null," to "),r.a.createElement("span",null,p),r.a.createElement("span",{className:"flag-icon flag-icon-".concat(l[p])})),r.a.createElement("div",{className:"align-self-center"},u)))}function b(e){var t=e.input,n=e.index,a=e.handleOnChangeCurrency,c=e.possiblePockets;return r.a.createElement("div",{className:"input-group"},r.a.createElement("div",null,r.a.createElement("label",{className:"input-group-text d-block"},r.a.createElement("span",{className:"flag-icon flag-icon-".concat(l[t.type])}))),r.a.createElement("select",{id:"inputGroupSelect01",className:"custom-select",value:t.type,"data-index":n,required:!0,onChange:a},c.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))}var g=n(5);function h(e){var t=e.errorMessage,n=e.input,a=e.index,c=e.handleOnChangeAmount;return r.a.createElement("div",{className:"input-group d-flex"},r.a.createElement("input",{type:"text",className:Object(g.a)("form-control","p-2",t&&0===a&&"is-invalid"),value:n.amount,"data-index":a,onBlur:c,onChange:c}),t&&0===a&&r.a.createElement("div",{className:Object(g.a)("p-2","invalid-tooltip")},t))}function N(e){var t=e.input,n=e.index,a=e.pockets,c=e.handleOnChangeCurrency,u=e.handleOnChangeAmount,o=e.currentExchangeRate,l=(e.setPockets,e.errorMessage),s=a.map((function(e){return e.type}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex"},r.a.createElement(b,{input:t,index:n,handleOnChangeCurrency:c,possiblePockets:s}),r.a.createElement(h,{errorMessage:l,input:t,index:n,handleOnChangeAmount:u})),0===n&&o&&r.a.createElement(y,{currentExchangeRate:o}))}function x(e){return e=(e=(e=(e=(e=(e=String(e)).replace(/[^0-9.]/g,"")).replace(/\.+/g,".")).replace(/(.*\.[0-9][0-9]?).*/g,"$1")).replace(/^0+(.*)$/,"0$1")).replace(/^0([^.].*)$/,"$1")}function O(e,t){var n=t.newCurrencyAmount,a=t.indexOfCurrentInput,r=t.rates,c=e.inputs,u=x(n),o=0===a?1:0,l=c[a].type,s=c[o].type,i=function(e,t,n,a){var r=t[n][a];return x(Number(e)*Number(r))}(u,r,l,s);return{inputs:c.map((function(e,t){var n=e.type;e.amount;return t===a?{type:n,amount:u}:{type:n,amount:i}}))}}function C(e,t){switch(t.type){case"CHANGE_CURRENCY_UNIT":return function(e,t){var n=t.newCurrencyUnit,a=t.indexOfCurrentInput,r=e.inputs,c=r[a],u=c.type,o=c.amount;if(u===n)return Object(d.a)({},e);var l=r.find((function(e,t){return t!==a})),s=l.type,i=l.amount;return s===n?{inputs:[{type:s,amount:i},{type:u,amount:o}]}:{inputs:r.map((function(e,t){return t===a?Object(d.a)({},e,{type:n}):e}))}}(e,t.payload);case"CHANGE_CURRENCY_AMOUNT":return O(e,t.payload);case"RESET_CURRENCY":return function(e){return{inputs:e.inputs.map((function(e){return Object(d.a)({},e,{amount:"0"})}))}}(e);default:throw new Error}}var j={inputs:[{type:"USD",amount:"0"},{type:"EUR",amount:"0"}]};function R(e){var t=e.rates,n=e.pockets,c=e.setPockets,u=Object(a.useReducer)(C,j),l=Object(o.a)(u,2),s=l[0],i=l[1],m=s.inputs,p=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current}(m);!function(e,t,n,r){Object(a.useEffect)((function(){if(t){var a=t.map((function(e){return e.type})).join(""),c=e.map((function(e){return e.type})).join("");if(a!==c){var u=a[0]===c[0]?0:1,o=e[u].amount;r({type:"CHANGE_CURRENCY_AMOUNT",payload:{newCurrencyAmount:o,indexOfCurrentInput:u,rates:n}})}}}),[e,n,t,r])}(m,p,t,i);var f=function(e,t){var n=Object(a.useState)(""),r=Object(o.a)(n,2),c=r[0],u=r[1];return Object(a.useEffect)((function(){if(0!==Object.keys(t).length){var n=Object(o.a)(e,2),a=n[0].type,r=n[1].type,c=t[a][r];u("".concat(a,"-").concat(r,":").concat(c.toFixed(2)))}}),[e,t]),c}(m,t),d=function(e){var t=e.target.value,n=Number(e.target.dataset.index);i({type:"CHANGE_CURRENCY_UNIT",payload:{newCurrencyUnit:t,indexOfCurrentInput:n}})},E=function(e){var n=e.target.value;n||(n="0");var a=Number(e.target.dataset.index);i({type:"CHANGE_CURRENCY_AMOUNT",payload:{newCurrencyAmount:n,indexOfCurrentInput:a,rates:t}})},v=function(e,t,n){var r=Object(a.useState)(null),c=Object(o.a)(r,2),u=c[0],l=c[1];return Object(a.useEffect)((function(){var n=e.type,a=e.amount,r=Number(a),c=t.find((function(e){return e.type===n})).amount,u=r>c?"The maximimum you can send is ".concat(c):null;l(u)}),[e,t]),u}(m[0],n),y=v||"0"===m[0].amount;return r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("div",{className:"d-flex justify-content-around"},m.map((function(e,t){return r.a.createElement(N,{key:e.type,handleOnChangeCurrency:d,input:e,index:t,setPockets:c,currentExchangeRate:f,pockets:n,errorMessage:v,handleOnChangeAmount:E})}))),r.a.createElement("button",{onClick:function(){if(!y){var e=Object(o.a)(m,2),t=e[0],a=t.type,r=t.amount,u=e[1],l=u.type,s=u.amount,p=n.map((function(e){if(e.type===a){var t=Number(r),n=(e.amount-t).toFixed(2);return{type:e.type,amount:Number(n)}}if(e.type===l){var c=Number(s),u=(e.amount+c).toFixed(2);return{type:e.type,amount:Number(u)}}return e}));c(p),i({type:"RESET_CURRENCY"})}},type:"button",disabled:y,className:"btn btn-primary btn-lg align-self-center"},"Exchange"))}var k=function(){var e=function(){var e,t=Object(a.useState)({}),n=Object(o.a)(t,2),r=n[0],c=n[1],u=new AbortController,l=u.signal;function s(){return i.apply(this,arguments)}function i(){return(i=Object(v.a)(f.a.mark((function t(){var n,a,r,u,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://api.exchangeratesapi.io/latest?base=USD",{signal:l});case 3:return n=t.sent,t.next=6,fetch("https://api.exchangeratesapi.io/latest?base=EUR",{signal:l});case 6:return a=t.sent,t.next=9,fetch("https://api.exchangeratesapi.io/latest?base=GBP",{signal:l});case 9:return r=t.sent,t.next=12,Promise.all([n.json(),a.json(),r.json()]);case 12:e=t.sent,t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0);case 18:u=["EUR","GBP","USD"],o=e.reduce((function(e,t){var n=t.rates,a=t.base,r=u.filter((function(e){return e!==a})).map((function(e){return Object(E.a)({},e,n[e])}));return Object(d.a)({},e,Object(E.a)({},a,r.reduce((function(e,t){return Object(d.a)({},e,{},t)}),{})))}),{}),c(o);case 21:case"end":return t.stop()}}),t,null,[[0,15]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){s();var e=setInterval(s,1e4);return function(){clearInterval(e),u.abort()}}),[]),r}(),t=Object(a.useState)([{type:"USD",amount:150},{type:"EUR",amount:50},{type:"GBP",amount:100}]),n=Object(o.a)(t,2),c=n[0],u=n[1];return 0===Object.keys(e).length?r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("strong",{className:"align-self-center"},"Loading..."),r.a.createElement("div",{className:"align-self-center spinner-border",role:"status","aria-hidden":"true"})):r.a.createElement("div",null,r.a.createElement(R,{pockets:c,setPockets:u,rates:e}),r.a.createElement(m,{pockets:c}))};var U=function(){return r.a.createElement("div",{className:"app"},r.a.createElement("h1",{className:"app-header"}," Revolut App "),r.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,n){e.exports=n(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.36aaf30b.chunk.js.map